<% provide(:title, 'Style Profile') %>
<%= render "shared/header" %>

<div class="style-profile container">
  <div class="top-image"></div>
  <div class="text-center">
    <h3>We want to get to know you <%= current_shopper.first_name %></h3>
    <h4>Fill out the following so we can help boutique owners hand-pick items you're sure to love</h4>
  </div>

  <div class="style-form">
    <%= form_for @style_profile, url: {action: 'update'} do |f| %>

        <fieldset>
          <%= render 'check_all_fieldset', title: 'Your sizes',
                     sections: [{prompt: "Select your top size.",
                                 class_name: 'top_sizes',
                                 attribute_string: 'style_profile[top_size_ids]',
                                 options: TopSize.all.map{|size|
                                   {label: size.name, value: size.id,
                                    checked: @style_profile.top_size_ids.include?(size.id)} }
                                },
                                {prompt: "Select your bottom size.",
                                     class_name: 'bottom_sizes',
                                     attribute_string: 'style_profile[bottom_size_ids]',
                                     options: BottomSize.all.map{|size|
                                       {label: size.name, value: size.id,
                                        checked: @style_profile.bottom_size_ids.include?(size.id)} }
                                },
                                {prompt: "Select your dress size.",
                                 class_name: 'dress_sizes',
                                 attribute_string: 'style_profile[dress_size_ids]',
                                 options: DressSize.all.map{|size|
                                   {label: size.name, value: size.id,
                                    checked: @style_profile.dress_size_ids.include?(size.id)} }
                                }] %>
        </fieldset>

        <fieldset>
          <%= render 'check_all_fieldset', title: 'Your build',
                     sections: [{prompt: "Which of the following (if any) describes you?",
                                 class_name: 'build',
                                 attribute_string: 'style_profile[body_build_ids]',
                                 options: BodyBuild.all.map{|build|
                                   {label: build.name, value: build.id,
                                    checked: @style_profile.body_build_ids.include?(build.id)} }
                                }] %>
        </fieldset>

        <fieldset>
          <% budget_options = [{label: 'max $50', value: 'max $50'},
                               {label: 'max $100', value: 'max $100'},
                               {label: 'max $150', value: 'max $150'},
                               {label: 'max $200', value: 'max $200'},
                               {label: '$200 +', value: '$200 +'}]%>
          <%= render 'dropdowns_fieldset', title: 'Your budget',
                     instructions: 'How much would you spend on the following?',
                     sections: [{prompt: "An everyday, work, or transitional dress",
                                 attribute_string: 'style_profile[dress_budget]',
                                 options: budget_options,
                                 selected: @style_profile.dress_budget
                                },
                                {prompt: "A shirt, blouse, or sweater",
                                 attribute_string: 'style_profile[top_budget]',
                                 options: budget_options,
                                 selected: @style_profile.top_budget
                                },
                                {prompt: "A pair of pants, jeans, or a skirt",
                                 attribute_string: 'style_profile[bottom_budget]',
                                 options: budget_options,
                                 selected: @style_profile.bottom_budget
                                }] %>
        </fieldset>

        <fieldset>
          <%= render 'image_tiles_fieldset', title: 'Looks you like',
                     prompt: 'Which of the following looks (if any) do you like? Click the image to select it.',
                     attribute_string: 'style_profile[look_ids]',
                     column_width: 3,
                     options: Look.all.shuffle.map{|look| {value: look.id,
                                                           image: look.image_path,
                                                           alt: look.name,
                                                           checked: @style_profile.look_ids.include?(look.id)} } %>
        </fieldset>

        <fieldset>
          <%= render 'check_all_fieldset', title: 'Your special considerations',
                     sections: [{prompt: "Which of the following (if any) are important to you?",
                                 class_name: 'values',
                                 attribute_string: 'style_profile[special_consideration_ids]',
                                 options: SpecialConsideration.all.map{|value|
                                   {label: value.name, value: value.id,
                                    checked: @style_profile.special_consideration_ids.include?(value.id)} }
                                }] %>
        </fieldset>

        <fieldset>
          <%= render 'dropdowns_fieldset', title: 'Your fit',
                     instructions: 'How do you (generally) like your tops and bottoms to fit?',
                     sections: [{prompt: "Top fit",
                                 attribute_string: 'style_profile[top_fit_id]',
                                 options: TopFit.all.map{|fit| {label: fit.name, value: fit.id}},
                                 selected: @style_profile.top_fit_id
                                },
                                {prompt: "Bottom fit",
                                 attribute_string: 'style_profile[bottom_fit_id]',
                                 options: BottomFit.all.map{|fit| {label: fit.name, value: fit.id}},
                                 selected: @style_profile.bottom_fit_id
                                }] %>
        </fieldset>

        <fieldset>
          <%= render 'check_all_fieldset', title: 'Your coverage',
                     sections: [{prompt: "What parts (if any) do you like to flaunt?",
                                 class_name: 'flaunt',
                                 attribute_string: 'style_profile[flaunted_part_ids]',
                                 options: Part.all.map{|part|
                                   {label: part.name, value: part.id,
                                    checked: @style_profile.flaunted_part_ids.include?(part.id)} }
                                },
                                {prompt: "What parts (if any) do you prefer to downplay?",
                                 class_name: 'cover',
                                 attribute_string: 'style_profile[downplayed_part_ids]',
                                 options: Part.all.map{|part|
                                   {label: part.name, value: part.id,
                                    checked: @style_profile.downplayed_part_ids.include?(part.id)} }
                                }] %>
        </fieldset>

        <fieldset>
          <%= render 'radio_images_fieldset', title: 'Sample select one image',
                     prompt: 'Which of these pictures describes you best?',
                     attribute_string: 'style_profile[me_image_id]',
                     selected: '2',
                     options: [
                             {value: '1', image: 'body_shapes/apple.jpg',
                             description: 'This is an apple shape'},
                             {value: '2', image: 'body_shapes/hourglass.jpg',
                             description: 'This is an hourglass shape'},
                             {value: '3', image: 'body_shapes/pear.jpg',
                             description: 'This is a pear shape'},
                             {value: '4', image: 'body_shapes/straight.jpg',
                             description: 'This a straight shape'},
                             {value: '5', image: 'body_shapes/inverted-triangle.jpg',
                              description: 'This a straight shape'} ] %>
        </fieldset>



        <br/>
        <%= f.submit 'Save and continue', class: 'btn btn-lg btn-primary center-block' %>
    <% end %>
  </div>
</div>
