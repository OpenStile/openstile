<% nested_top_ids_map = top_size_ids_map %>
<% nested_bottom_ids_map = bottom_size_ids_map %>
<% nested_dress_ids_map = dress_size_ids_map %>

<div id="top_sizes" class="sizes-block">
  <h4><b>Top Sizes:</b></h4>
  <div class="row">
  <div class="alpha-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <%= form_helper.collection_check_boxes(:top_size_ids, TopSize.where(category: "alpha"), :id, :name) do |b| %>
      <div class="single-checkbox">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
  <div class="row">
  <div class="numeric-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <h4>(numeric size)</h4>
    <%= form_helper.collection_check_boxes(:top_size_ids, TopSize.where(category: "numeric"), :id, :name) do |b| %>
      <% parent_ids_string = 
         nested_top_ids_map.select{|parent, children| children.include?(b.object.id)}.keys.map{|v| "parent-id-#{v}"}.join(" ") %>
      <div class="<%="single-checkbox #{parent_ids_string}"%>">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
</div>

<div id="bottom_sizes" class="sizes-block">
  <h4><b>Bottom Sizes:</b></h4>
  <div class="row">
  <div class="alpha-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <%= form_helper.collection_check_boxes(:bottom_size_ids, BottomSize.where(category: "alpha"), :id, :name) do |b| %>
      <div class="single-checkbox">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
  <div class="row">
  <div class="numeric-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <h4>(numeric size)</h4>
    <%= form_helper.collection_check_boxes(:bottom_size_ids, BottomSize.where(category: "numeric"), :id, :name) do |b| %>
      <% parent_ids_string = 
         nested_bottom_ids_map.select{|parent, children| children.include?(b.object.id)}.keys.map{|v| "parent-id-#{v}"}.join(" ") %>
      <div class="<%="single-checkbox #{parent_ids_string}"%>">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
  <div class="row">
  <div class="inch-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <h4>(waist size)</h4>
    <%= form_helper.collection_check_boxes(:bottom_size_ids, BottomSize.where(category: "inches"), :id, :name) do |b| %>
      <% parent_ids_string = 
         nested_bottom_ids_map.select{|parent, children| children.include?(b.object.id)}.keys.map{|v| "parent-id-#{v}"}.join(" ") %>
      <div class="<%="single-checkbox #{parent_ids_string}"%>">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
</div>

<div id="dress_sizes" class="sizes-block">
  <h4><b>Dress Sizes:</b></h4>
  <div class="row">
  <div class="alpha-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <%= form_helper.collection_check_boxes(:dress_size_ids, DressSize.where(category: "alpha"), :id, :name) do |b| %>
      <div class="single-checkbox">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
  <div class="row">
  <div class="numeric-sizes col-md-offset-1 col-xs-offset-1 col-md-11 col-xs-11">
    <h4>(numeric size)</h4>
    <%= form_helper.collection_check_boxes(:dress_size_ids, DressSize.where(category: "numeric"), :id, :name) do |b| %>
      <% parent_ids_string = 
         nested_dress_ids_map.select{|parent, children| children.include?(b.object.id)}.keys.map{|v| "parent-id-#{v}"}.join(" ") %>
      <div class="<%="single-checkbox #{parent_ids_string}"%>">
        <%= b.label(class: "checkbox-inline col-md-2 col-xs-2") { b.check_box(class: "col-md-2 col-xs-2") + b.text } %>
      </div>
    <% end %>
  </div>
  </div>
</div>

